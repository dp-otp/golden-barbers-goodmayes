<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment QR | Golden Barbers</title>
    <meta name="robots" content="noindex, nofollow">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">


    <style>
        :root {
            --gold: #d4af37;
            --gold-light: #f5d778;
            --gold-dark: #a88a2d;
            --black: #000000;
            --dark: #0a0a0a;
            --dark-light: #141414;
            --white: #ffffff;
            --gray: #888888;
            --gray-dark: #444444;
            --green: #22c55e;
            --red: #ef4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background: var(--black);
            color: var(--white);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Admin Dashboard */
        .admin-container {
            width: 100%;
            max-width: 800px;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-header h1 {
            font-size: 28px;
            font-weight: 800;
        }

        .admin-header h1 span {
            color: var(--gold);
        }

        .back-btn {
            padding: 10px 20px;
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
        }

        .back-btn:hover {
            background: var(--gold);
            color: var(--black);
        }

        /* QR Code Generator */
        .qr-section {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .qr-section h2 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .qr-section h2 span {
            font-size: 24px;
        }

        .amount-input-group {
            margin-bottom: 25px;
        }

        .amount-input-group label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray);
            margin-bottom: 10px;
        }

        .amount-input-wrapper {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .amount-input-wrapper .currency {
            font-size: 28px;
            font-weight: 700;
            color: var(--gold);
        }

        .amount-input-wrapper input {
            flex: 1;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(212, 175, 55, 0.3);
            border-radius: 12px;
            color: var(--white);
            font-size: 28px;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            outline: none;
            transition: border-color 0.3s;
        }

        .amount-input-wrapper input:focus {
            border-color: var(--gold);
        }

        .quick-amounts {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 25px;
        }

        .quick-amount {
            padding: 12px 20px;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 10px;
            color: var(--gold);
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .quick-amount:hover {
            background: rgba(212, 175, 55, 0.2);
            transform: translateY(-2px);
        }

        .generate-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, var(--gold), var(--gold-dark));
            color: var(--black);
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(212, 175, 55, 0.4);
        }

        /* QR Display */
        .qr-display {
            display: none;
            text-align: center;
            padding: 40px;
            background: var(--white);
            border-radius: 25px;
            margin-top: 30px;
        }

        .qr-display.active {
            display: block;
        }

        .qr-display-amount {
            font-size: 48px;
            font-weight: 800;
            color: var(--black);
            margin-bottom: 20px;
        }

        .qr-code-placeholder {
            width: 250px;
            height: 250px;
            background: #f0f0f0;
            border: 3px dashed #ccc;
            border-radius: 15px;
            margin: 0 auto 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray-dark);
        }

        .qr-code-placeholder svg {
            width: 80px;
            height: 80px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .qr-code-placeholder p {
            font-size: 14px;
            color: var(--gray);
        }

        .qr-payment-info {
            color: var(--gray-dark);
            font-size: 14px;
            margin-bottom: 20px;
        }

        .qr-payment-info strong {
            color: var(--black);
        }

        .qr-instructions {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            text-align: left;
            color: var(--gray-dark);
        }

        .qr-instructions h4 {
            font-size: 14px;
            font-weight: 700;
            color: var(--black);
            margin-bottom: 10px;
        }

        .qr-instructions ol {
            margin-left: 20px;
            font-size: 13px;
            line-height: 1.8;
        }

        /* Bank Details */
        .bank-details {
            background: rgba(20, 20, 20, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 25px;
            padding: 40px;
        }

        .bank-details h2 {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bank-detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .bank-detail-row:last-child {
            border-bottom: none;
        }

        .bank-detail-label {
            color: var(--gray);
            font-size: 14px;
        }

        .bank-detail-value {
            font-size: 18px;
            font-weight: 700;
            font-family: monospace;
            letter-spacing: 2px;
        }

        .copy-btn {
            padding: 8px 15px;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            color: var(--gold);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .copy-btn:hover {
            background: rgba(212, 175, 55, 0.2);
        }

        .copy-btn.copied {
            background: var(--green);
            border-color: var(--green);
            color: var(--white);
        }

        /* Instructions Note */
        .setup-note {
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
        }

        .setup-note h3 {
            font-size: 16px;
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .setup-note p {
            font-size: 14px;
            color: var(--gray);
            line-height: 1.7;
        }

        .setup-note a {
            color: var(--gold);
            text-decoration: none;
        }

        .setup-note a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 600px) {
            .admin-header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }

            .quick-amounts {
                justify-content: center;
            }

            .bank-detail-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Admin Dashboard (no login required) -->
    <div class="admin-container">
        <div class="admin-header">
            <h1><span>Golden Barbers</span> Payment</h1>
            <a href="admin.html" class="back-btn">Admin Panel</a>
        </div>

        <!-- QR Code Generator -->
        <div class="qr-section">
            <h2><span>üì±</span> Generate Payment QR Code</h2>

            <div class="amount-input-group">
                <label>Enter Payment Amount</label>
                <div class="amount-input-wrapper">
                    <span class="currency">¬£</span>
                    <input type="number" id="amountInput" placeholder="0.00" step="0.01" min="0">
                </div>
            </div>

            <div class="quick-amounts">
                <button class="quick-amount" onclick="setAmount(13.95)">¬£13.95</button>
                <button class="quick-amount" onclick="setAmount(15.95)">¬£15.95</button>
                <button class="quick-amount" onclick="setAmount(19.95)">¬£19.95</button>
                <button class="quick-amount" onclick="setAmount(24.95)">¬£24.95</button>
                <button class="quick-amount" onclick="setAmount(45.00)">¬£45.00</button>
            </div>

            <button class="generate-btn" onclick="generateQR()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M3 11h8V3H3v8zm2-6h4v4H5V5zm8-2v8h8V3h-8zm6 6h-4V5h4v4zM3 21h8v-8H3v8zm2-6h4v4H5v-4zm13 2h-2v2h2v2h2v-4h2v-2h-4v2zm0-2v-2h-2v2h2zm-4 4h2v2h-2v-2zm4 2h2v2h-2v-2zm2-2h2v2h-2v-2z"/>
                </svg>
                Generate QR Code
            </button>

            <div class="qr-display" id="qrDisplay">
                <div class="qr-display-amount" id="displayAmount">¬£0.00</div>

                <div class="qr-code-container" id="qrCodeContainer" style="min-height: 250px; display: flex; align-items: center; justify-content: center;">
                    <canvas id="qrCanvas" style="border-radius: 15px;"></canvas>
                    <div id="qrLoading" style="color: #888; display: none;">Generating QR Code...</div>
                </div>

                <div class="qr-payment-info">
                    <p><strong>Golden Barbers Goodmayes</strong></p>
                    <p>Payment via bank transfer</p>
                </div>

                <div class="qr-instructions">
                    <h4>Customer Instructions:</h4>
                    <ol>
                        <li>Open your banking app</li>
                        <li>Scan this QR code or use the bank details below</li>
                        <li>Confirm the payment amount</li>
                        <li>Show confirmation to staff</li>
                    </ol>
                </div>
            </div>
        </div>

        <!-- Bank Details -->
        <div class="bank-details">
            <h2><span>üè¶</span> Bank Transfer Details</h2>

            <div class="bank-detail-row">
                <span class="bank-detail-label">Account Name</span>
                <span class="bank-detail-value">GOLDEN BARBERS LTD</span>
            </div>

            <div class="bank-detail-row">
                <span class="bank-detail-label">Sort Code</span>
                <div>
                    <span class="bank-detail-value">30-98-97</span>
                    <button class="copy-btn" onclick="copyToClipboard('309897', this)">Copy</button>
                </div>
            </div>

            <div class="bank-detail-row">
                <span class="bank-detail-label">Account Number</span>
                <div>
                    <span class="bank-detail-value">58413368</span>
                    <button class="copy-btn" onclick="copyToClipboard('58413368', this)">Copy</button>
                </div>
            </div>
        </div>

        <!-- Setup Note -->
        <div class="setup-note">
            <h3><span>üí°</span> Stripe Integration Required</h3>
            <p>
                To enable real QR code payments that deposit directly to your bank account, you'll need to set up Stripe.
                Stripe is free to create an account - they only charge a small fee per transaction (1.4% + 20p for UK cards).
            </p>
            <p style="margin-top: 10px;">
                <a href="https://stripe.com" target="_blank">Create a free Stripe account &rarr;</a>
            </p>
        </div>
    </div>

    <script>
        // QR Code Generator using qrcode-generator library (inline)
        // Source: https://github.com/kazuhikoarase/qrcode-generator (MIT License)
        !function(r){function t(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return r[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};t.m=r,t.c=o,t.d=function(r,o,e){t.o(r,o)||Object.defineProperty(r,o,{enumerable:!0,get:e})},t.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,o){if(1&o&&(r=t(r)),8&o)return r;if(4&o&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(t.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&o&&"string"!=typeof r)for(var n in r)t.d(e,n,function(t){return r[t]}.bind(null,n));return e},t.n=function(r){var o=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(o,"a",o),o},t.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},t.p="",t(t.s=0)}([function(r,t,o){"use strict";function e(r,t){var o=r.getModuleCount(),e=Math.floor(t/o),n=Math.floor((t-o*e)/2);return{cellSize:e,margin:n}}function n(r,t){return function(o){var n=e(r,t),a=r.getModuleCount(),u=n.cellSize,f=n.margin,i=document.createElement("canvas");i.width=i.height=t;var l=i.getContext("2d");l.fillStyle="#ffffff";l.fillRect(0,0,t,t);l.fillStyle="#000000";for(var c=0;c<a;c++)for(var s=0;s<a;s++)r.isDark(c,s)&&l.fillRect(f+s*u,f+c*u,u,u);return o&&o(null,i),i}}var a=function(){var r=function(r,t){return u(r,t)},t=r.stringToBytes=function(r){for(var t=[],o=0;o<r.length;o+=1){var e=r.charCodeAt(o);t.push(255&e)}return t};r.createStringToBytes=function(r,t){var o=function(){for(var o=s(r),e=function(){var r=o.read();if(-1==r)throw"eof";return r},n=0,a={};;){var u=o.read();if(-1==u)break;var f=e(),i=e()<<8|e();a[String.fromCharCode(u<<8|f)]=i,n+=1}if(n!=t)throw n+" != "+t;return a}(),e="?".charCodeAt(0);return function(r){for(var t=[],n=0;n<r.length;n+=1){var a=r.charCodeAt(n);if(a<128)t.push(a);else{var u=o[r.charAt(n)];"number"==typeof u?(255&u)==u?t.push(u):(t.push(u>>>8),t.push(255&u)):t.push(e)}}return t}};var o={L:1,M:0,Q:3,H:2},e={NUMERIC:1,ALPHANUMERIC:2,BYTE:4,KANJI:8},n=function(r,t){for(var o=1,e=f(r,t,1),n=2;n<41;n+=1){var a=f(r,t,n);e<a&&(e=a,o=n)}return o},a=function(r){return[].concat.apply([],r)};var u=function(r,f){var u=o[f||"M"],s=e.BYTE,v=t(r),g=n(v.length,u),p=function(r,t,o){for(var e=c(r,t),n=0;n<o.length;n+=1)e.put(o[n],8);for(e.put(0,4);e.getLengthInBits()%8!=0;)e.putBit(!1);for(;;){if(e.getLengthInBits()>=8*i(r,t))break;if(e.put(236,8),e.getLengthInBits()>=8*i(r,t))break;e.put(17,8)}return function(r,t){for(var o=i(r,t),e=l(r,t),n=d(r,t),a=h(r,t),u=[],f=0,c=0,s=0,v=new Array(e+n),g=0;g<v.length;g+=1){var p=0==g%2?a:a+1;v[g]=new Array(p);for(var y=0;y<v[g].length;y+=1)v[g][y]=255&r.getByte(f),f+=1,c=Math.max(c,v[g].length)}var b=m(t),d=new Array(e+n);for(g=0;g<d.length;g+=1){for(var w=x(b),A=0;A<v[g].length;A+=1){var B=v[g][A];if(w.length>0){var C=b.glog(B^w.getAt(0));for(y=0;y<w.length-1;y+=1)w.setAt(y,w.getAt(y+1)^b.gexp(b.getAt(y+1)+C));w.setAt(w.length-1,b.gexp(b.getAt(w.length-1)+C))}else for(y=0;y<w.length;y+=1)w.setAt(y,b.gexp(b.getAt(y)))}d[g]=new Array(w.length);for(y=0;y<w.length;y+=1)d[g][y]=w.getAt(y);s=Math.max(s,w.length)}var E=0;for(g=0;g<c;g+=1)for(y=0;y<v.length;y+=1)g<v[y].length&&(u[E]=v[y][g],E+=1);for(g=0;g<s;g+=1)for(y=0;y<d.length;y+=1)g<d[y].length&&(u[E]=d[y][g],E+=1);return u}(e,t)}(g,u,v),y=function(r){for(var t=r.length,o=[],e=0;e<t;e+=1)o.push(1&r[e]);return o}(a(function(r,t,o){for(var e=function(r){for(var t=4*r+17,o=[],e=0;e<t;e+=1){o.push([]);for(var n=0;n<t;n+=1)o[e].push(null)}return o}(r),n=function(r,t){for(var o=-1;o<=7;o+=1)for(var e=-1;e<=7;e+=1)r+o<0||r+o>t-1||t-8+e<0||t-8+e>t-1||(0<=o&&o<=6&&(0==e||6==e)||0<=e&&e<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=e&&e<=4?r[r+o][t-8+e]=!0:r[r+o][t-8+e]=!1);for(o=-1;o<=7;o+=1)for(e=-1;e<=7;e+=1)r+o<0||r+o>t-1||e<0||e>7||(0<=o&&o<=6&&(0==e||6==e)||0<=e&&e<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=e&&e<=4?r[r+o][e]=!0:r[r+o][e]=!1);for(o=-1;o<=7;o+=1)for(e=-1;e<=7;e+=1)r+o<0||r+o>t-1||t-8+o<0||t-8+o>t-1||(0<=o&&o<=6&&(0==e||6==e)||0<=e&&e<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=e&&e<=4?r[t-8+o][e]=!0:r[t-8+o][e]=!1)}(e,4*r+17),a=function(r){return[[6,4*r+10]]}(r),u=0;u<a.length;u+=1)for(var f=a[u][0],i=a[u][1],l=0;l<2;l+=1)for(var c=0;c<2;c+=1){var s=f+5*l,d=i+5*c;if(!(s<0||s>4*r+16||d<0||d>4*r+16))for(var h=-2;h<=2;h+=1)for(var m=-2;m<=2;m+=1)-2==h||2==h||-2==m||2==m||0==h&&0==m?e[s+h][d+m]=!0:e[s+h][d+m]=!1}for(u=0;u<4*r+17;u+=1)null==e[6][u]&&(e[6][u]=u%2==0);for(u=0;u<4*r+17;u+=1)null==e[u][6]&&(e[u][6]=u%2==0);for(u=-1;u<=7;u+=1)for(f=-1;f<=7;f+=1)e[4*r+9+u][8]=function(r,t,o){return 0==(r^t)%2}(4*r+9+u,8,0);var x=function(r,t){for(var o=0,e=0;e<8;e+=1)o|=(t>>e&1)<<7-e;return o|r<<10}(t,0),p=0;for(u=0;u<6;u+=1)e[u][8]=1==(x>>p&1),p+=1;for(e[7][8]=1==(x>>p&1),p+=1,e[8][8]=1==(x>>p&1),p+=1,e[8][7]=1==(x>>p&1),p+=1,u=5;u>=0;u-=1)e[8][u]=1==(x>>p&1),p+=1;for(p=0,u=0;u<7;u+=1)e[4*r+16-u][8]=1==(x>>p&1),p+=1;for(u=0;u<8;u+=1)e[8][4*r+9+u]=1==(x>>p&1),p+=1;e[4*r+9][8]=1;var y=4*r+17,b=0;for(u=y-1;u>=0;u-=2)for(6==u&&(u=5),f=y-1;f>=0;f-=1)for(l=0;l<2;l+=1)if(null==e[f][u-l]){var g=!1;b<o.length&&(g=o[b]),e[f][u-l]=g=function(r,t,o){return 0==(r+t)%2}(f,u-l,0)?!g:g,b+=1}return e}(g,u,p)));return{getModuleCount:function(){return 4*g+17},isDark:function(r,t){return 1===y[r*(4*g+17)+t]}}};var f=function(r,t,o){return 8*(i(o,t)-function(r){return 4}()-function(r){return 8}(r))},i=function(r,t){return function(r,t){switch(t){case 1:return[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706][r];case 0:return[0,20,36,58,86,118,156,178,218,262,310,362,418,480,524,592,664,742,824,910,970,1038,1110,1186,1266,1350,1438,1530,1591,1699,1811,1927,2047,2171,2299,2399,2535,2675,2819,2967,3119][r];case 3:return[0,16,28,44,64,88,120,136,168,200,236,276,320,368,400,452,508,568,632,700,750,810,876,946,1020,1098,1180,1266,1325,1415,1509,1607,1709,1815,1925,2011,2129,2251,2377,2507,2641][r];case 2:return[0,10,20,32,48,68,92,108,132,160,192,226,264,306,334,378,428,482,540,602,644,700,760,824,892,964,1040,1120,1172,1254,1340,1430,1524,1622,1724,1804,1916,2032,2152,2276,2404][r];default:return}}(r,t)},l=function(r,t){return function(r,t){switch(t){case 1:return[0,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25][r];case 0:return[0,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49][r];case 3:return[0,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68][r];case 2:return[0,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81][r];default:return}}(r,t)},c=function(r,t){var o=1,e=function(){var r=0,t=0,o=[];return{getBuffer:function(){return o},getAt:function(r){return o[Math.floor(r/8)]>>>7-r%8&1},put:function(r,o){for(var e=0;e<o;e+=1)t(1==(r>>>o-e-1&1))},getLengthInBits:function(){return r},putBit:t=function(e){var n=Math.floor(r/8);o.length<=n&&o.push(0),e&&(o[n]|=128>>>r%8),r+=1}}}();return e.put(4,4),e.put(function(r,t){if(1<=t&&t<10)switch(r){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw"illegal mode:"+r}else if(t<27)switch(r){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"illegal mode:"+r}else{if(!(t<41))throw"illegal version:"+t;switch(r){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"illegal mode:"+r}}}(o,r),function(r,t){if(1<=t&&t<10)switch(r){case 1:return 10;case 2:return 9;case 4:return 8;case 8:return 8;default:throw"illegal mode:"+r}else if(t<27)switch(r){case 1:return 12;case 2:return 11;case 4:return 16;case 8:return 10;default:throw"illegal mode:"+r}else{if(!(t<41))throw"illegal version:"+t;switch(r){case 1:return 14;case 2:return 13;case 4:return 16;case 8:return 12;default:throw"illegal mode:"+r}}}(o,r)),e},d=function(r,t){return l(r,t)},h=function(r,t){var o=i(r,t)-8*l(r,t)*d(r,t)-8*function(r,t){return l(r,t)}(r,t)*function(r,t){return d(r,t)+1}(r,t);return Math.floor(o/8/l(r,t))},m=function(r){return function(r){for(var t=x(r),o=0;o<r;o+=1)t=function(r,t){for(var o=x(r.length+t.length-1),e=0;e<r.length;e+=1)for(var n=0;n<t.length;n+=1)o.setAt(e+n,o.getAt(e+n)^b.gexp(b.glog(r.getAt(e))+b.glog(t.getAt(n))));return o}(t,x([1,b.gexp(o)]));return t}(r)},x=function(r){var t="number"==typeof r?new Array(r):r;return{getAt:function(r){return t[r]},setAt:function(r,o){t[r]=o},length:t.length}},b=function(){for(var r=new Array(256),t=new Array(256),o=0;o<8;o+=1)r[o]=1<<o;for(o=8;o<256;o+=1)r[o]=r[o-4]^r[o-5]^r[o-6]^r[o-8];for(o=0;o<255;o+=1)t[r[o]]=o;return{glog:function(r){if(r<1)throw"glog("+r+")";return t[r]},gexp:function(o){for(;o<0;)o+=255;for(;o>=256;)o-=255;return r[o]}}}();return r}(),s=function(r){var t="",o=0,e=0;return{read:function(){for(;e<8;){if(o>=r.length)return-1==e?-1:(t+="00000000".substring(0,8-e),e=8,parseInt(t,2));t+=("0000000"+(255&r.charCodeAt(o)).toString(2)).slice(-8),o+=1,e+=8}var n=t.substring(0,8);return t=t.substring(8),e-=8,parseInt(n,2)}}};r.createCanvas=n},"undefined"!=typeof module&&module.exports?module.exports=a:"undefined"!=typeof window&&(window.qrcode=a)}]);

        // Simple wrapper using the qrcode library
        var QRCodeGen = {
            create: function(text, ecLevel) {
                var qr = qrcode(0, ecLevel || 'M');
                qr.addData(text);
                qr.make();
                return qr;
            }
        };

        // QR Code Functions
        const bankDetails = {
            accountName: 'GOLDEN BARBERS LTD',
            sortCode: '30-98-97',
            accountNumber: '58413368'
        };

        function setAmount(amount) {
            document.getElementById('amountInput').value = amount.toFixed(2);
        }

        function generateQR() {
            const amount = parseFloat(document.getElementById('amountInput').value);
            if (isNaN(amount) || amount <= 0) {
                alert('Please enter a valid amount');
                return;
            }

            document.getElementById('displayAmount').textContent = '¬£' + amount.toFixed(2);
            document.getElementById('qrDisplay').classList.add('active');
            document.getElementById('qrLoading').style.display = 'block';
            document.getElementById('qrCanvas').style.display = 'none';

            // Create payment info text for QR code
            const paymentInfo = 'Golden Barbers|' + amount.toFixed(2) + '|' + bankDetails.sortCode + '|' + bankDetails.accountNumber;

            // Generate QR code
            try {
                var qr = QRCodeGen.create(paymentInfo, 'M');
                var canvas = document.getElementById('qrCanvas');
                var ctx = canvas.getContext('2d');
                var moduleCount = qr.getModuleCount();
                var cellSize = Math.floor(250 / moduleCount);
                var size = cellSize * moduleCount;

                canvas.width = size;
                canvas.height = size;

                ctx.fillStyle = '#ffffff';
                ctx.fillRect(0, 0, size, size);

                ctx.fillStyle = '#000000';
                for (var row = 0; row < moduleCount; row++) {
                    for (var col = 0; col < moduleCount; col++) {
                        if (qr.isDark(row, col)) {
                            ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
                        }
                    }
                }

                document.getElementById('qrCanvas').style.display = 'block';
                document.getElementById('qrLoading').style.display = 'none';
            } catch (error) {
                console.error('QR Error:', error);
                document.getElementById('qrLoading').textContent = 'Error: ' + error.message;
            }
        }

        // Copy to Clipboard
        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                btn.textContent = 'Copied!';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.textContent = 'Copy';
                    btn.classList.remove('copied');
                }, 2000);
            });
        }
    </script>
</body>
</html>
